/**forbidden compressed parameters info****
 * Note:"chs" is a parameter where input the chinese string.This sequence is cann't be reversed.The new value is appended to the last positon,separator by "@@".
 **/
var lang = 'zh';
var chs='商品库存不足@@正在加载购物车，请稍后再尝试添加此商品，或<a href="#" onclick="location.reload()">刷新</a>此页面@@正在加载购物车，请稍后再尝试修改数量，或<a href="#" onclick="location.reload()">刷新</a>此页面@@正在加载购物车，请稍后再尝试，或<a href="#" onclick="location.reload()">刷新</a>此页面\n\
 @@管理我的地址库@@重新查找@@很抱歉，此商品暂时缺货。@@商品@@预估金额@@运费@@VIP贵宾购物即享受95折@@查看详细@@贵宾服务专线：400-898-9797@@账户可用余额：@@余额不足@@请充值@@继续消费：@@免运费@@即可参与@@活动。@@您本次的收货地址是：@@修改@@添加我的收货地址@@您还没有默认的收货地址信息,提醒您在选购商品前至少添加一个收货地址\n\
 @@赠品@@删除@@您的购物车中暂无商品@@总计金额@@参与会员增值计划 享受最高折扣@@开业酬宾，生鲜商品配送免运费！@@共@@件商品@@总计：@@您的购物车中暂无商品，快去挑选中意的商品吧。@@您需要在登录后才可以查看购物车中商品@@确定@@关闭@@请先登录后再收藏商品！@@商品已被删除！@@您已经收藏过此商品！@@收藏成功！\n\
 @@删除成功！@@收藏出现异常！@@斤@@【@@】@@帮助@@您好@@请登录@@退出登录@@不是@@免费注册@@请输入搜索词@@很抱歉，商品库存不足，最多只可购买@@原价@@促销价@@贵宾价@@单价@@￥@@很抱歉！您选择的商品目前只在北京地区配送。<br />建议您：<br />1.还没有添加收货地址信息？ 请点击“管理我的地址库”按钮添加收货地址<br />2.已经创建了地址库，从现有地址库中选择一个北京地区的收货地址<br />3.重新查找同类商品\n\
 @@很抱歉，该商品库存不足，最多只可购买[ {max} ]@@您好，该商品可购买的数量区间为@@的整数@@×@@欢迎光临新鲜生活@@登录@@注册@@首页@@促@@赠@@数量@@元@@免费注册@@即可@@很抱歉，该商品目前仅限VIP会员购买，建议您看看其他同类商品，谢谢！@@，@@：@@精彩活动即将开始，敬请期待！@@目标转化@@事件@@跟踪目的@@购物车面板结算@@注册链接@@专享价@@阶梯价@@购买数量@@可节省@@专享购物区@@大家说@@该商品目前只限VIP会员、专享会员购买，感谢您的支持！@@换购商品不能修改数量@@全场购物满@@网络繁忙，@@点击这里@@重新加载！@@会员@@普通@@其他@@绿芽@@畅购卡@@高级@@专享@@秒杀商品不能修改数量@@每款活动商品每人限抢1件，请勿重复抢购！@@秒杀价 @@社区';
var tx=new Array();
tx = chs.split("@@");
//for(var i=0;i<tx.length;i++){
//    document.write("tx["+i+"]="+tx[i]+"<br>");
//}

/*domain config*/
var web_domain = "http://localhost/";
var web_pay_domain = "http://localhost/";
var web_img_domain = "/images/";
var web_js_domain = "/Scripts/";
var web_user_domain = "http://localhost/";

var web_en_host = "shop.tootoo.cn";

var web_img_path = 'http://localhost/images/cn/';
/*this goods only special users can buy*/
var cartSpecialRules = [
    {"goods":[1014320],"startDate":"2013-01-08","endDate":"2013-01-13","msg":tx[89]},
    {"goods":[1011320],"startDate":"2013-01-08","endDate":"2013-01-13","msg":tx[89]},
];
/**********here put the util_main_v2.js min**********************************************************/
var userAgent=navigator.userAgent.toLowerCase();var is_opera=userAgent.indexOf("opera")!=-1&&opera.version();var is_moz=(navigator.product=="Gecko")&&userAgent.substr(userAgent.indexOf("firefox")+8,3);var is_ie=(userAgent.indexOf("msie")!=-1&&!is_opera)&&userAgent.substr(userAgent.indexOf("msie")+5,3);var is_safari=(userAgent.indexOf("webkit")!=-1||userAgent.indexOf("safari")!=-1);var isFloorCart=true;var $tt_carAjaxPath=web_domain+"cart.php";var $tt_carSdcAlert=tx[59];var $tt_carStockAlert=tx[60];var $tt_password_min=6;var $tt_password_max=20;var $tt_nickname_min=4;var $tt_nickname_max=16;var $tt_answer_min=4;var $tt_answer_max=50;var special_gid=1012320;var hasinput2=false;var ship_air=$_GET("shipair");var set_promotion_from_cookie=true;var promotion_from=$_GET("promotion_from");try{promotion_from=decodeURI(promotion_from)}catch(e){set_promotion_from_cookie=false}promotion_from=promotion_from.substr(0,20);var promotion_day=parseInt($_GET("promotion_day"));if(promotion_day<0||!promotion_day){promotion_day=1}var promotion_hour=promotion_day*24;var buyerSource=$_GET("buyersource");var inviteEmail=$_GET("inviteemail");var inviteId=$_GET("inviteid");var source_id=$_GET("source_id");var notice_sku_id;var _gaq=_gaq||[];var initJs=function(){buyerInfo.load();if(ship_air+""!=""){cookieConfig("shipair",ship_air,24)}if(source_id+""!=""){cookieConfig("source_id",source_id,24*30)}if(promotion_from+""!=""&&set_promotion_from_cookie==true){cookieConfig("promotion_from",promotion_from,promotion_hour)}if(buyerSource+""!=""){cookieConfig("buyersource",buyerSource,168)}if(inviteEmail+""!=""){cookieConfig("invite_email",inviteEmail,168)}if(inviteId+""!=""){cookieConfig("invite_id",inviteId,168)}JT_init();var a=new needLoadImg(251,222);a.init();window.onscroll=function(){a.init()};window.onresize=function(){a.init()}};var Buyer=function(){this.onlineStatusPlantTextName="u";this.onlineStatusCiphertextName="um";this.onlineStatusExpireName="ut";this.buyerCookieUtWarnTime=60*60*2;this.buyerCookieUtDelayTime=60*60*2;this.buyerTypeDict={1:tx[96]+tx[95],2:"VIP"+tx[95],3:tx[97]+tx[95],4:tx[97]+tx[95],5:tx[97]+tx[95],6:tx[97]+tx[95],7:tx[98]+tx[95],8:tx[99]+tx[95],10:tx[100]+tx[95],11:tx[101]+tx[95]};this.BUYER_ID=null;this.NICKNAME=null;this.BUYER_EMAIL=null;this.AUTH_COMPANY_ID=null;this.HAVE_ORDER=null;this.BUYER_TYPE=null;this.BUYER_LEVEL=null;this.TYPE_NAME=null;this.init=function(){var infostr=$.cookies.get(this.onlineStatusPlantTextName);var infos=new Array();if(typeof(infostr)=="string"){infos=infostr.split("|");this.BUYER_ID=infos[0];this.NICKNAME=infos[1];this.BUYER_EMAIL=infos[2];this.AUTH_COMPANY_ID=infos[3];this.HAVE_ORDER=infos[4];this.BUYER_TYPE=infos[5];this.BUYER_LEVEL=infos[6];if(typeof this.buyerTypeDict[this.BUYER_TYPE]=="undefined"){this.TYPE_NAME=tx[95]}else{this.TYPE_NAME=this.buyerTypeDict[this.BUYER_TYPE]}}else{this.BUYER_ID=this.NICKNAME=this.BUYER_EMAIL=this.AUTH_COMPANY_ID=this.HAVE_ORDER=this.BUYER_TYPE=this.BUYER_LEVEL=this.TYPE_NAME=null}};this.getIsGuest=function(forcInit){if(forcInit){this.init()}if(this.BUYER_ID&&$.cookies.get(this.onlineStatusCiphertextName)&&$.cookies.get(this.onlineStatusExpireName)){var ut=$.cookies.get(this.onlineStatusExpireName).split("|");var currLocalTime=parseInt((new Date()).valueOf()/1000);var currServerTime=currLocalTime+parseInt(ut[1]);var currServerExpire=parseInt(ut[0]);if(currServerTime>currServerExpire){return true}else{return false}}return true};this.updateOnlineStatus=function(){var cookieUt=$.cookies.get(this.onlineStatusExpireName);if(!cookieUt){return false}var infos=cookieUt.split("|");var expire=parseInt(infos[0]);if(!expire||typeof infos[1]=="undefined"){return false}var clientCurrTime=parseInt((new Date).valueOf()/1000);var serverCurrTime=clientCurrTime+parseInt(infos[1]);if(serverCurrTime<expire&&(serverCurrTime+this.buyerCookieUtWarnTime)>expire){cookieConfig(this.onlineStatusExpireName,(expire+this.buyerCookieUtDelayTime)+"|"+infos[1])}return true};this.makeLoginStr=function(){var to_url=location.href;to_url=to_url.replace("promotion_from","p");to_url=$_GET("tourl")?$_GET("tourl"):encodeURIComponent(to_url);if(this.NICKNAME!=null&&this.NICKNAME.match(/^1[3|4|5|8][0-9]\d{8}$/)){this.NICKNAME=this.NICKNAME.substring(0,3)+"*****"+this.NICKNAME.substring(8,11)}if(this.getIsGuest(false)){if($.cookies.get("buyersource")!==null){$("#loginstr").html('<span id="hello_msg">'+tx[64]+'! [ <a href="'+web_user_domain+"login.html?tourl="+to_url+'">'+tx[65]+"</a> / <a onclick=\"_pzt.events.push({ type: 'target', category: '"+tx[78]+"_"+tx[82]+"', action: '"+tx[79]+"_"+tx[82]+"', opt_label: '"+tx[80]+"_"+tx[82]+'\', value: 1 });" href="'+web_domain+"sale/13/promotion/index.html?is_reg=1&tourl="+to_url+'">'+tx[72]+"</a> ] </span>")}else{$("#loginstr").html('<span id="hello_msg">'+tx[64]+'! [ <a href="'+web_user_domain+"login.html?tourl="+to_url+'">'+tx[65]+"</a> / <a onclick=\"_pzt.events.push({ type: 'target', category: '"+tx[78]+"_"+tx[82]+"', action: '"+tx[79]+"_"+tx[82]+"', opt_label: '"+tx[80]+"_"+tx[82]+'\', value: 1 });" href="'+web_user_domain+"reg.html?is_reg=1&tourl="+to_url+'">'+tx[72]+"</a> ] </span>")}}else{$("#loginstr").html('<span id="hello_msg">'+tx[47]+","+this.NICKNAME+'&nbsp;&nbsp;&nbsp;[<a href="'+web_user_domain+'index.php?r=tBuyer/logout">'+tx[49]+"</a>]</span>")}};this.popUpSimpleLoginLayer=function(str){if(this.getIsGuest()){if($("#easysss").length<=0){$.ajax({type:"GET",dataType:"jsonp",url:web_user_domain+"index.php?r=tBuyer/quickLog&callback=?",timeout:10000,success:function(data){$("body").append('<div id="easysss" style="width:100%;height:100%; position:absolute;left:0;top:0;z-index:100000"></div>');$("#easysss").html(data);$("#needstrs").append('<div style="display:none" id="needstr">'+str+"</div>");window.scrollTo(0,0)}})}else{window.scrollTo(0,0)}}else{eval(str)}};this.customizePageNav=function(){var thisUrl=window.location.href;if(this.BUYER_TYPE=="11"){$("#ExclusiveMember").after('<li class="ExclusiveMembers"><a href="'+web_domain+'index.php?r=tGoods/htzx">'+tx[87]+"</a></li>")}else{$("#ExclusiveMember").after('<li class="ExclusiveMembers  nav_position_re"><a href="#">'+tx[105]+'</a><p class="nav_position_ab1"><img src="http://misc.ttmimg.com/images/cn/2013/2013_public1.gif"></p></li>')}if(thisUrl.indexOf("/index.php?r=tGoods/htzx")>0){$(".curr_channelnav").removeClass("curr_channelnav");$(".ExclusiveMembers").addClass("curr_channelnav")}};this.load=function(){this.updateOnlineStatus();this.init();this.makeLoginStr();this.customizePageNav()}};Buyer_En=function(){};Buyer_En.prototype=new Buyer();Buyer_En.prototype.makeLoginStr=function(){var b=location.href;b=b.replace("promotion_from","p");b=$_GET("tourl")?$_GET("tourl"):escape(b);if(this.getIsGuest(false)){$("#login").html('<a href="/login.html?tourl='+b+'">Login</a>');$("#signup").html('<a href="/login.html?tourl='+b+'">Sign up</a>')}else{var a=this.NICKNAME.length>10?this.NICKNAME.substr(0,10)+"...":this.NICKNAME;$("#login").html('<a href="/index.php?r=tBuyer/center">'+a+"</a>");$("#signup").html('<a href="/index.php?r=tBuyer/logout">Log off</a>')}};Buyer_En.prototype.load=function(){this.updateOnlineStatus();this.init();this.makeLoginStr()};TTCart=function(){this.instanceName="$car";this.cartCookieName="cart";this.cartCookieDomain=".tootoo.cn";this.delimiter="#";this.separator="x";this.giftPrefix=":";this.nyPrefix="-";this.cartPattern=/^((\d{7}|(\d{7}\-)*\d{7}\-\d{7})x\d{1,999}x.*x[^x]#)*((\d{7}|(\d{7}\-)*\d{7}\-\d{7})x\d{1,999}x.*x[^x])$/;this.listUrl=web_domain+"index.php?r=tCart/list";this.checkScdUrl=web_domain+"index.php?r=tActive/canYouBuy";this.goodsPool=[];this.data={};this.lastChangeGoods={};this.lock=false;this.promoteTypeLength=1;this.saleTypeNone="0";this.saleTypeDiscount="1";this.saleTypeGoodsAmountGift="5";this.saleTypeGoodsNumGift="6";this.saleTypeChangeBuy="2";this.saleTypePack="3";this.saleTypeNy="8";this.saleTypeSecond="4";this.saleTypeMn="d";this.secondPrice=1;this.init=function(){if(this.getInstanceName()!==this.instanceName){alert("Instance Name Of Class TTCart Must be "+this.instanceName)}this.initCartPanel()};this.specialRules=function(skuId){if(typeof cartSpecialRules!=="undefined"){for(x in cartSpecialRules){if($.inArray(skuId,cartSpecialRules[x].goods)!==-1&&timeRange(cartSpecialRules[x].startDate,cartSpecialRules[x].endDate)){myAlert(cartSpecialRules[x].msg);return false}}}return true};this.addGoods=function(skuId,amount,promoteType,minBuyNum,maxBuyNum,callback,myBuyFrom){if(!this.beforeAddGoods()){return false}if(!this.specialRules(skuId)){return false}var cartArr=this.getCartArrFromCookie();var index=this.getIndex(skuId,promoteType,cartArr);if(index!==false){if(!this.modifyGoods(skuId,cartArr[index].amount+Number(amount),promoteType,minBuyNum,maxBuyNum)){return false}}else{if(!this.checkAmount(amount,minBuyNum,maxBuyNum)){return false}if(promoteType==this.saleTypeSecond){if(amount!=1){var topDis=$("html,body").scrollTop();myAlert(tx[103]);$("html,body").scrollTop(topDis);return false}var isGuest=buyerInfo.getIsGuest(true);if(isGuest){header(web_user_domain+"login.html?tourl="+encodeURIComponent(window.location.href));return false}this.addSecondGoods(skuId,promoteType,amount,myBuyFrom,callback);return true}var record=this.addToCookieCart(skuId,promoteType,amount,myBuyFrom);if(!record){return false}this.lastChangeGoods=record;if(this.getIsMainCartOpen()){this.refreshCartPanel()}}this.afterAddGoods();if(typeof callback!="undefined"){callback()}return true};this.addSecondGoods=function(skuId,promoteType,amount,myBuyFrom,callback){var url=this.checkScdUrl;var obj=this;$.ajax({type:"GET",url:url,data:"skuId="+skuId,timeout:5000,dataType:"jsonp",jsonp:"callback",success:function(result){var data=eval(result);if(typeof data.err_code!="undefined"){if(data.err_code==1401){header(web_user_domain+"login.html?tourl="+encodeURIComponent(window.location.href));return false}else{var topDis=$("html,body").scrollTop();myAlert(data.err_msg);$("html,body").scrollTop(topDis);return false}}var record=obj.addToCookieCart(skuId,promoteType,amount,myBuyFrom);if(!record){return false}obj.lastChangeGoods=record;if(obj.getIsMainCartOpen()){obj.refreshCartPanel()}obj.afterAddGoods();if(typeof callback!="undefined"){callback()}return true},error:function(){var topDis=$("html,body").scrollTop();myAlert(tx[92].substr(0,4));$("html,body").scrollTop(topDis);return false}})};this.beforeAddGoods=function(){return true};this.afterAddGoods=function(){};this.addToCookieCart=function(skuId,promoteType,amount,myBuyFrom){var cartArr=this.getCartArrFromCookie();var currRecord=this.createNewRecord(skuId,promoteType,amount,myBuyFrom);cartArr.unshift(currRecord);var newCookieCart=this.arr2Str(cartArr);if(typeof newCookieCart!="string"){return false}else{$.cookies.set(this.cartCookieName,newCookieCart,{path:"/",hoursToLive:720,domain:this.cartCookieDomain});return currRecord}};this.createNewRecord=function(skuId,promoteType,amount,myBuyFrom){var currRecord=new Array();currRecord.skuId=(promoteType==this.saleTypeNy)?parseIntArray(skuId.split("-")):parseInt(skuId);currRecord.amount=Number(amount);currRecord.buyFrom=this.analyzeSource(myBuyFrom);currRecord.promoteType=promoteType.toString();return currRecord};this.analyzeSource=function(myBuyFrom){var buyFrom="0";if(typeof myBuyFrom=="undefined"||!myBuyFrom){var url=window.location.href;var file=url.substring(url.lastIndexOf("/")+1);if(file+""!=""){var regs=[{reg:/category\-(\d+)\.html/,tag:"c"},{reg:/product\-(\d+)\.html/,tag:"p"},{reg:/actlist-pack(.)html/,tag:"ap"},{reg:/actlist\-goods(\.)html/,tag:"ag"},{reg:/browernode(\.)php/,tag:"b"}];for(x in regs){var isHit=regs[x]["reg"].exec(file);if(isHit){buyFrom=regs[x]["tag"]+"|"+isHit[1];break}}}}else{var PagePosArr=new Array("h01","h02","h11","h12","h13","h14","h21","h22","h23","h24","h31","h32","h33","h34","h41","h42","h43","h44","h51","h52","h53","h54","h61","h62","h63","h64","hbzx","orderdetail","order_list");if($.inArray(myBuyFrom,PagePosArr)!=-1){buyFrom=myBuyFrom}}return buyFrom};this.delGoods=function(skuId,promoteType){if(!this.deleteFromCookieCart(skuId,promoteType)){return false}this.refreshCartPanel();return true};this.deleteFromCookieCart=function(skuId,promoteType){var cartArr=this.getCartArrFromCookie();var index=this.getIndex(skuId,promoteType,cartArr);if(index===false){myAlert(tx[38]);this.getCartDetail();return false}cartArr.splice(index,1);var newCookieCart=this.arr2Str(cartArr);if(typeof newCookieCart!="string"){return false}else{$.cookies.set(this.cartCookieName,newCookieCart,{path:"/",hoursToLive:720,domain:this.cartCookieDomain});return true}};this.modifyGoods=function(skuId,amount,promoteType,minBuyNum,maxBuyNum){if(!this.checkAmount(amount,minBuyNum,maxBuyNum)){return false}if(promoteType==this.saleTypeChangeBuy){myAlert(tx[90]);return false}if(promoteType==this.saleTypeSecond){var topDis=$("html,body").scrollTop();myAlert(tx[103]);$("html,body").scrollTop(topDis);return false}var record=this.modifyCookieCart(skuId,amount,promoteType);if(!record){return false}this.lastChangeGoods=record;if(this.getIsMainCartOpen()){this.refreshCartPanel()}return true};this.getAmountBySkuAndSale=function(skuId,promoteType){var cartArr=this.getCartArrFromCookie();var index=this.getIndex(skuId,promoteType,cartArr);if(index===false){return 0}return cartArr[index].amount};this.modifyCookieCart=function(skuId,amount,promoteType){var cartArr=this.getCartArrFromCookie();var index=this.getIndex(skuId,promoteType,cartArr);if(index===false){if(this.getIsMainCartOpen()){this.refreshCartPanel()}myAlert(tx[38]);return false}cartArr[index].amount=Number(amount);var newCookieCart=this.arr2Str(cartArr);if(typeof newCookieCart!="string"){return false}else{$.cookies.set(this.cartCookieName,newCookieCart,{path:"/",hoursToLive:720,domain:this.cartCookieDomain});return cartArr[index]}};this.refurCartNum=function(cartNum){if(cartNum==0){$("#cart_num").hide();$("#showcarts").removeClass("online_service_icon3")}else{$("#showcarts").addClass("online_service_icon3");$("#cart_num").html(cartNum);$("#cart_num").show()}};this.createNewData=function(){var newData={};newData.freeLimit=this.data.freeLimit;newData.shipFee=this.data.shipFee;newData.goodsList=[];newData.sum=0;newData.totalNum=0;var cookieArr=this.getCartArrFromCookie();for(x in cookieArr){var s=isNaN(cookieArr[x].skuId)?cookieArr[x].skuId.join("-"):cookieArr[x].skuId;var dataIndex=this.getDataIndexFromGoodsList(s,cookieArr[x].promoteType,this.goodsPool);newData.goodsList.push(this.updateGoodsInPool(dataIndex,cookieArr[x].amount))}newData.sum=parseFloat(this.getSumByGoodsList(newData.goodsList)).toFixed(2);newData.totalNum=this.getTotalNumByGoodsList(newData.goodsList);return newData};this.refreshCartPanel=function(){this.showLoading();if(this.getMissingGoods().length>0){this.getCartDetail()}else{this.data=this.createNewData();this.refurCartPanel()}};this.getTotalNumByGoodsList=function(goodsList){var totalNum=0;for(s in goodsList){if(goodsList[s].PROMOTION_TYPE==this.saleTypeNy){var skuArr=goodsList[s].SKU_ID.split("-");totalNum+=goodsList[s].AMOUNT*skuArr.length}else{totalNum+=goodsList[s].AMOUNT}}return totalNum};this.getSumByGoodsList=function(goodsList){var sum=0;for(t in goodsList){if(goodsList[t].PROMOTION_TYPE==this.saleTypeMn){sum+=this.getSumByGoodAndSaleMn(goodsList[t])}else{sum+=this.getSumByGoodNomal(goodsList[t])}}return sum};this.getSumByGoodAndSaleMn=function(good){var discount_amount;var base_amount;if(!isNaN(good.CHANGE_START)&&!isNaN(good.CHANGE_GOODS_PRICE)&&good.AMOUNT>=good.CHANGE_START){discount_amount=Math.floor(good.AMOUNT/good.CHANGE_START);base_amount=good.AMOUNT-discount_amount;return this.getSumByAmountAndPrice(good.GOODS_PRICE,base_amount)+this.getSumByAmountAndPrice(good.CHANGE_GOODS_PRICE,discount_amount)}return this.getSumByGoodNomal(good)};this.getSumByGoodNomal=function(good){return this.getSumByAmountAndPrice(good.GOODS_PRICE,good.AMOUNT)};this.getSumByAmountAndPrice=function(price,amount){return(amount*price*100)/100};this.getMissingGoods=function(){var cookieArr=this.getCartArrFromCookie();var missingGoods=[];var obj=this;(function(){for(x in cookieArr){var s=isNaN(cookieArr[x].skuId)?cookieArr[x].skuId.join("-"):cookieArr[x].skuId;var dataIndex=obj.getDataIndexFromGoodsList(s,cookieArr[x].promoteType,obj.goodsPool);if(dataIndex===false){missingGoods.push(cookieArr[x])}}})();return missingGoods};this.updateGoodsInPool=function(dataIndex,amount){this.goodsPool[dataIndex].AMOUNT=parseInt(amount);if(this.goodsPool[dataIndex].stairprice.length!==0){var currPrice=this.getLadderPrice(this.goodsPool[dataIndex].AMOUNT,this.goodsPool[dataIndex].stairprice);if(currPrice!==false){this.goodsPool[dataIndex].PRICE_NAME=tx[84];this.goodsPool[dataIndex].GOODS_PRICE=parseFloat(currPrice[0])}else{this.goodsPool[dataIndex].PRICE_NAME=this.goodsPool[dataIndex].PRICE_NAME_NOSTAIR;this.goodsPool[dataIndex].GOODS_PRICE=parseFloat(this.goodsPool[dataIndex].GOODS_PRICE_NOSTAIR)}}return this.goodsPool[dataIndex]};this.getInstanceName=function(){for(var a in window){if(window[a]==this){return a.toString()}}return false};this.initCartPanel=function(){this.initMainCartPanel();this.initTopCartPanel()};this.refurCartPanel=function(){this.refurMainCartPanel();this.refurTopCartPanel()};this.cleanCartPanel=function(){this.cleanMainCartPanel();this.cleanTopCartPanel()};this.addToGoodsPool=function(goodsList){for(x in goodsList){if(this.getDataIndex(goodsList[x].SKU_ID,goodsList[x].PROMOTION_TYPE)===false){this.goodsPool.push(goodsList[x])}}};this.showLoading=function(){var loadingDom=$('<div class="tt_loading"><img src="'+web_img_path+'index2012/tt_loading.gif"></div>');$("#open_cart_prolist").empty().append(loadingDom)};this.showBusy=function(){var busyDom=$('<div class="failed_to_load">'+tx[92]+'<a href="javascript:void(0);" onclick="'+this.instanceName+'.getCartDetail();">'+tx[93]+"</a>"+tx[94]+"</div>");$("#open_cart_prolist").empty().append(busyDom)};this.getCartDetail=function(){if(this.lock===true){return}var obj=this;obj.lock=true;$.ajax({type:"GET",url:obj.listUrl,timeout:15000,dataType:"jsonp",jsonp:"callback",success:function(result){obj.lock=false;var data=result;obj.addToGoodsPool(data.goodsList);obj.data=data;obj.refurCartPanel()},error:function(XMLHttpRequest,textStatus,errorThrown){obj.lock=false;obj.showBusy()}})};this.appendMainCartDom=function(){};this.refurCartNumByCookie=function(){var cartArr=this.getCartArrFromCookie();var num=0;(function(){for(x in cartArr){num+=cartArr[x].amount}})();this.refurCartNum(num)};this.getCartGoodsNum=function(){var cartArr=this.getCartArrFromCookie();var num=0;(function(){for(x in cartArr){num+=cartArr[x].amount}})();return num};this.setMainCartHandlers=function(){var obj=this;$("#showcarts").click(function(){$("#cart_bord").show();var cartStr=$.cookies.get(this.cartCookieName);if(Boolean(cartStr)){obj.refreshCartPanel()}else{obj.cleanCartPanel()}});$("#close_button").click(function(){$("#cart_bord").hide()});this.checkoutChange();$("#open_cart_check").bind("click",{obj:$car},$car.check)};this.initMainCartPanel=function(){this.appendMainCartDom();this.refurCartNumByCookie();this.setMainCartHandlers()};this.initTopCartPanel=function(){this.setTopCartHandlers()};this.setTopCartHandlers=function(){$("#cart_checkout").bind("click",{obj:$car},$car.check)};this.check=function(event){_gaq.push(["_trackPageview","/c_cart.html"]);if(event.data.obj.isCartNotEmpty()){window.location=web_pay_domain+"index.php?r=tCheckout"}else{myAlert(tx[33])}return false};this.isCartNotEmpty=function(){var cartArr=this.getCartArrFromCookie();if(cartArr.length==0){return false}return true};this.refurTopCartPanel=function(){};this.refurMainCartPanel=function(){if(this.data.totalNum==0){this.cleanMainCartPanel();return}$("#shopp_news_amount").html(this.data.totalNum);this.refurCartNum(this.data.totalNum);$("#open_cart_allprice").html(this.data.sum);if(this.data.sum<this.data.freeLimit&&this.data.sum>0){$("#continue_fee").html(parseFloat(this.data.freeLimit-this.data.sum).toFixed(2));$("#continueBuy").show()}else{$("#continueBuy").hide()}var mainCartDom=$('<ul class="newshopp_goods_list"></ul');if(this.lastChangeGoods!==null){var record1={skuId:this.lastChangeGoods.skuId,promoteType:this.lastChangeGoods.promoteType}}for(index in this.data.goodsList){var mainCartItem=$("<li></li>");if(typeof record1!=="undefined"){var record2={skuId:this.data.goodsList[index].SKU_ID,promoteType:this.data.goodsList[index].PROMOTION_TYPE};if(this.getIsHit(record1,record2)===true){mainCartItem=$('<li class="goods_list_new"></li>')}}var mainItem1=$('<div class="newshopp_goods_list1"></div>');mainItem1.append('<div class="newshopp_number_l"><input type="text" class="newshopp_number" value="'+this.data.goodsList[index].AMOUNT+'" skuId="'+this.data.goodsList[index].SKU_ID+'" promoteType="'+this.data.goodsList[index].PROMOTION_TYPE+'" lastAmount="'+this.data.goodsList[index].AMOUNT+'" minBuyNum="'+this.data.goodsList[index].MIN_BUY_NUM+'" maxBuyNum="'+this.data.goodsList[index].MAX_BUY_NUM+'"/></div>');mainItem1.append('<div class="newshopp_number_r"><p class="newshopp_number_rtop" ><a at="'+this.instanceName+'.addOne" href="javascript:void(0);"></a></p><p class="newshopp_number_rbottom"><a at="'+this.instanceName+'.subOne" href="javascript:void(0);"></a></p>');var mainItem2=$('<div class="newshopp_goods_list2"></div>');mainItem2.append('<a href="'+this.data.goodsList[index].DETAIL_LINK+'"><img src="'+this.data.goodsList[index].PIC50+'" onerror="this.src=\''+web_img_path+"notfound_50.gif';\"></a>");var mainItem3=$('<div class="newshopp_goods_list3"></div>');var nameStr="";if(this.data.goodsList[index].IS_IN_PROMOTION==="1"){nameStr='<p class="newshopp_goods_list3name"><span>[ '+tx[68]+' ] </span><a target="_blank" href="'+this.data.goodsList[index].DETAIL_LINK+'">'+this.data.goodsList[index].GOODS_TITLE+"</a></p>"}else{nameStr='<p class="newshopp_goods_list3name"><a target="_blank" href="'+this.data.goodsList[index].DETAIL_LINK+'">'+this.data.goodsList[index].GOODS_TITLE+"</a></p>"}mainItem3.append(nameStr);if(this.data.goodsList[index].gift!=null){var giftStr='<p class="newshopp_goods_list3name font_gray" ><span>['+tx[69]+"]</span>"+this.data.goodsList[index].gift.GOODS_TITLE+"&nbsp;"+tx[63]+this.data.goodsList[index].gift.AMOUNT+"</p>";mainItem3.append(giftStr)}var priceDom=$('<div class="newshopp_goods_list3name"></div>');var ladderArea=$('<div class="shopping_ladder_price"></div>');if(this.data.goodsList[index].stairprice.length!=0){var ladderSwitchDom=$('<a href="javascript:void(0);" class="ladderswitch"><img src="'+web_img_path+'index2012/shopping_ladder_price.png"></a>');ladderSwitchDom.hover(function(){$(this).siblings(".ladder").show()},function(){$(this).siblings(".ladder").hide()});ladderArea.append(ladderSwitchDom);var ladderCont=$('<div class="shopping_ladder_price1 ladder" style="display:none;"></div>');var ladderContext='<div class="shopping_ladder_price2"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="ladder_price_list"><tbody><tr><td width="5%" height="22"></td><td><strong>'+tx[85]+'</strong></td><td width="30%"><strong>'+tx[84]+'</strong></td><td width="30%"><strong>'+tx[86]+"</strong></td></tr>";var ladderText="";for(x in this.data.goodsList[index].stairprice){var ladderItem="<tr><td></td><td>"+this.data.goodsList[index].stairprice[x].START_NUM+"-"+this.data.goodsList[index].stairprice[x].END_NUM+"/"+this.data.goodsList[index].MARKETING_NAME+"</td><td>"+tx[58]+parseFloat(this.data.goodsList[index].stairprice[x].GOODS_PRICE_SALES).toFixed(2)+tx[71]+"/"+this.data.goodsList[index].MARKETING_NAME+"</td><td>"+tx[58]+(parseFloat(this.data.goodsList[index].BASE_PRICE)-parseFloat(this.data.goodsList[index].stairprice[x].GOODS_PRICE_SALES)).toFixed(2)+tx[71]+"/"+this.data.goodsList[index].MARKETING_NAME+"</td></tr>";ladderText=ladderItem+ladderText}ladderContext+=ladderText+"</tbody></table></div>";ladderCont.append(ladderContext);ladderArea.append(ladderCont)}priceDom.append('<div class="newshopp_left_price">'+this.data.goodsList[index].PRICE_NAME+tx[76]+'<span style="font-family:verdana;">'+tx[58]+"</span>"+parseFloat(this.data.goodsList[index].GOODS_PRICE).toFixed(2)+"&nbsp/&nbsp"+this.data.goodsList[index].MARKETING_NAME+"</div>");priceDom.append(ladderArea);mainItem3.append(priceDom);var mainItem4=$('<div class="newshopp_goods_list4"></div>');var mainDelBtn=$('<a href="javascript:void(0);" title="'+tx[25]+'" at="'+this.instanceName+'.delOne" skuId="'+this.data.goodsList[index].SKU_ID+'" promoteType="'+this.data.goodsList[index].PROMOTION_TYPE+'"><img src="'+web_img_path+'index2012/newshopp_img16.jpg"></a>');mainItem4.append(mainDelBtn);mainCartItem.append(mainItem1).append(mainItem2).append(mainItem3).append(mainItem4);mainCartDom.append(mainCartItem);var seperator=$('<li class="newshopp_border"> </li>');mainCartDom.append(seperator)}$("#open_cart_prolist").html(mainCartDom)};this.cleanMainCartPanel=function(){this.refurCartNum(0);$("#shopp_news_amount").html(0);$("#open_cart_allprice").html(0);$("#continueBuy").hide();$("#open_cart_prolist").html('<div id="open_cart_nopro" class="newshopp_goods_no"><img src="'+web_img_path+'index2012/newshopp_img18.jpg"></div>')};this.cleanTopCartPanel=function(){};this.checkoutChange=function(){var cartObj=this;$("#open_cart_prolist").delegate("a","click",function(){if($(this).attr("at")){var at=$(this).attr("at");eval(at+"(this);")}});$("#open_cart_prolist").delegate(".newshopp_goods_list1","mouseleave",function(){var obj=$(this).find("input");var skuId=$(obj).attr("skuId");var promoteType=$(obj).attr("promoteType");var lastAmount=Number($(obj).attr("lastAmount"));var minBuyNum=Number($(obj).attr("minBuyNum"));var maxBuyNum=Number($(obj).attr("maxinBuyNum"));var currAmount=Number($(obj).val());if(currAmount!=lastAmount){if(cartObj.modifyGoods(skuId,currAmount,promoteType,minBuyNum,maxBuyNum)===false){$(obj).val(lastAmount)}}})};this.addOne=function(obj){var inputDom=$(obj).closest(".newshopp_goods_list1").find("input");var maxBuyNum=isNaN(Number($(obj).attr("maxBuyNum")))?999:Number($(obj).attr("maxBuyNum"));if(Number($(inputDom).val())+1>maxBuyNum){return false}$(inputDom).val(Number($(inputDom).val())+1);return true};this.subOne=function(obj){var inputDom=$(obj).closest(".newshopp_goods_list1").find("input");var minBuyNum=isNaN(Number($(obj).attr("minBuyNum")))?1:Number($(obj).attr("minBuyNum"));if(Number($(inputDom).val())-1<minBuyNum){return false}$(inputDom).val(Number($(inputDom).val())-1);return true};this.delOne=function(obj){var skuId=$(obj).attr("skuId");var promoteType=$(obj).attr("promoteType");this.delGoods(skuId,promoteType)};this.checkAmount=function(amount,minBuyNum,maxBuyNum){var amountInt=parseInt(amount);var minBuyNumInt=isNaN(parseInt(minBuyNum))?1:parseInt(minBuyNum);var maxBuyNumInt=isNaN(parseInt(maxBuyNum))?999:parseInt(maxBuyNum);if(isNaN(amountInt)||!numberRange(amountInt,minBuyNumInt,maxBuyNumInt)){myAlert(tx[61]+"["+minBuyNumInt+"-"+maxBuyNumInt+"]"+tx["62"]);return false}return true};this.getCartArrFromCookie=function(){var cartCookie=$.cookies.get(this.cartCookieName);var arr=this.str2Arr(cartCookie);return arr===false?new Array():arr};this.getIndex=function(skuId,promoteType,cartArr){var record1={skuId:skuId,promoteType:promoteType};for(x in cartArr){var sid=cartArr[x].promoteType==this.saleTypeNy?cartArr[x].skuId.join("-"):cartArr[x].skuId;var record2={skuId:sid,promoteType:cartArr[x].promoteType};if(this.getIsHit(record1,record2)===true){return x}}return false};this.getDataIndex=function(skuId,promoteType){if(this.data==null){return false}if(typeof this.data.goodsList=="undefined"||this.data.goodsList==null){return false}return this.getDataIndexFromGoodsList(skuId,promoteType,this.data.goodsList)};this.getDataIndexFromGoodsList=function(skuId,promoteType,goodsList){if(goodsList==null){return false}var record1={skuId:skuId,promoteType:promoteType};for(listIndex in goodsList){var record2={skuId:goodsList[listIndex].SKU_ID,promoteType:goodsList[listIndex].PROMOTION_TYPE};if(this.getIsHit(record1,record2)===true){return listIndex}}return false};this.getIsHit=function(record1,record2){if(record1.skuId==record2.skuId){if(record1.promoteType==record2.promoteType){return true}else{if(this.getIsGeneralPrmt(record1.promoteType)&&this.getIsGeneralPrmt(record2.promoteType)){return true}else{return false}}}else{return false}};this.getIsGeneralPrmt=function(prmtType){return(prmtType==this.saleTypeNone||prmtType==this.saleTypeDiscount||prmtType==this.saleTypeGoodsAmountGift||prmtType==this.saleTypeGoodsNumGift||prmtType==this.saleTypeMn)};this.getAmountChanged=function(skuId,amount,promoteType){if(promoteType==this.saleTypeNy){sid=skuId.split("-");return sid.length*parseInt(amount)}else{return parseInt(amount)}};this.getIsMainCartOpen=function(){return $("#cart_bord").is(":visible")};this.getLadderPrice=function(amount,stairPrice){for(x in stairPrice){if(amount>=stairPrice[x].START_NUM&&amount<=stairPrice[x].END_NUM){return[stairPrice[x].GOODS_PRICE_SALES,stairPrice[x].GOODS_PRICE]}}return false};this.str2Arr=function(string){var exp=new RegExp(this.cartPattern);if(!exp.test(string)){return false}var arr=string.split(this.delimiter);var myArr=new Array();for(x in arr){var record=arr[x].split(this.separator);var myRecord=new Array();myRecord.skuId=record[0];myRecord.amount=record[1];myRecord.buyFrom=record[2];myRecord.promoteType=record[3];if(myRecord.promoteType=="8"){myRecord.skuId=myRecord.skuId.split(this.nyPrefix)}var isSkuIdArray=myRecord.skuId instanceof Array;if(isSkuIdArray){for(y in myRecord.skuId){myRecord.skuId[y]=parseInt(myRecord.skuId[y])}}else{myRecord.skuId=parseInt(myRecord.skuId)}myRecord.amount=parseInt(myRecord.amount);myArr.push(myRecord)}return myArr};this.arr2Str=function(array){var str="";for(x in array){if(typeof array[x]["skuId"]=="undefined"||!(typeof array[x]["skuId"]=="number"||array[x]["skuId"] instanceof Array)){return -1}if(typeof array[x]["amount"]=="undefined"||typeof array[x]["amount"]!="number"){return -2}if(typeof array[x]["buyFrom"]=="undefined"||typeof array[x]["buyFrom"]!="string"){return -3}if(typeof array[x]["promoteType"]=="undefined"||typeof array[x]["promoteType"]!="string"||array[x]["promoteType"].length!=this.promoteTypeLength){return -4}if((array[x]["promoteType"]==this.saleTypeNy&&!array[x]["skuId"] instanceof Array)||(array[x]["promoteType"]!=this.saleTypeNy&&array[x]["skuId"] instanceof Array)){return -5}if(array[x]["promoteType"]==this.saleTypeNy){array[x]["skuId"]=array[x]["skuId"].join(this.nyPrefix)}var itemStr="";for(y in array[x]){itemStr+=array[x][y]+this.separator}itemStr=itemStr.substr(0,itemStr.length-1);str+=itemStr+this.delimiter}return str===""?str:str.substr(0,str.length-1)};this.fly=function(obj,proPic){var carObj=this;if(this.getIsMainCartOpen()){return false}var ballDom=$('<img class="ball" src="'+proPic+'" onerror="this.src=\''+web_img_path+'notfound_50.gif\';" style="width:30px;height:30px;position:absolute;z-index:1000000;border:1px solid #841027;"/>');$("body").append(ballDom);ballDom.css({top:$(obj).offset().top,left:$(obj).offset().left});ballDom.animate({top:$(document).scrollTop()+130-40,left:$(window).scrollLeft()+$(window).width()-35-20},1000,function(){$(this).animate({top:$(document).scrollTop()+130+10},1000,function(){$(this).remove();carObj.refurCartNumByCookie()})});return true};this.toCheck=function(obj){var carObj=this;carObj.refurCartNumByCookie();$(obj).bind("click",{obj:$car},$car.check);$(obj).trigger("click");return true}};var TTCart_En=function(){this.listUrl="/index.php?r=tCart/list";this.cartCookieName="cart_en";this.cartCookieDomain=location.host;this.appendMainCartDom=function(){var showDom=buyerInfo.getIsGuest(true)?"#cart_logout":"#cart_login_micro";$(showDom).show()};this.refurCartNum=function(cartNum){$("#sum_amount").html(cartNum)};this.setMainCartHandlers=function(){var cartObj=this;$("#cart_switcher_open").click(function(){$("#cart_login_micro").hide();$("#cart_login").show();var cartStr=$.cookies.get(this.cartCookieName);if(Boolean(cartStr)){cartObj.refreshCartPanel()}else{cartObj.cleanCartPanel()}});$("#cart_switcher_close").click(function(){$("#cart_login").hide();$("#cart_login_micro").show()});this.checkoutChange();$("#cart_check_top,#cart_check_main").bind("click",{obj:$car},$car.check)};this.check=function(event){if(buyerInfo.getIsGuest(true)||!event.data.obj.isCartNotEmpty()){myAlert(tx[33])}else{header("/index.php?r=tCheckout")}return false};this.refurMainCartPanel=function(){if(this.data.totalNum==0){this.showEmpty();return}$("#sum_amount_open").html(this.data.totalNum);this.refurCartNum(this.data.totalNum);$("#sum_allprice").html(this.data.sum);var mainCartDom=$("#cart_goods_list");$(mainCartDom).empty();if(this.lastChangeGoods!==null){var record1={skuId:this.lastChangeGoods.skuId,promoteType:this.lastChangeGoods.promoteType}}for(index in this.data.goodsList){var mainCartItem=$('<div class="cart_section_c"></div>');var cartItemContDom=$('<div class="cart_section_cont"></div>');if(typeof record1!=="undefined"){var record2={skuId:this.data.goodsList[index].SKU_ID,promoteType:this.data.goodsList[index].PROMOTION_TYPE};if(this.getIsHit(record1,record2)===true){mainCartItem=$('<div class="cart_section_c1"></div>')}}var mainItem1=$('<div class="cart_section_purchases"></div>');mainItem1.append('<div class="cart_purchases_number"><input type="text" value="'+this.data.goodsList[index].AMOUNT+'" skuId="'+this.data.goodsList[index].SKU_ID+'" promoteType="'+this.data.goodsList[index].PROMOTION_TYPE+'" lastAmount="'+this.data.goodsList[index].AMOUNT+'" minBuyNum="'+this.data.goodsList[index].MIN_BUY_NUM+'" maxBuyNum="'+this.data.goodsList[index].MAX_BUY_NUM+'"></div>');mainItem1.append('<div class="increase_or_decrease"><p class="increase_cart"><a at="'+this.instanceName+'.addOne" href="javascript:void(0);"></a></p><p class="decrease_cart"><a at="'+this.instanceName+'.subOne" href="javascript:void(0);"></a></p></div>');var mainItem2=$('<div class="cart_section_img"><a href="'+this.data.goodsList[index].DETAIL_LINK+'"  target="_blank"><img src="'+this.data.goodsList[index].PIC50+'" onerror="this.src=\''+web_img_path+"notfound_50.gif';\"></a></div>");var mainItem3=$('<div class="cart_section_price"><span>'+tx[58]+parseFloat(this.data.goodsList[index].GOODS_PRICE).toFixed(2)+"</span></div>");var mainItem4=$('<div class="cart_section_delete"><a art="delete" tit="delete" href="javascript:void(0);" at="'+this.instanceName+'.delOne" skuId="'+this.data.goodsList[index].SKU_ID+'" promoteType="'+this.data.goodsList[index].PROMOTION_TYPE+'"></a></div>');cartItemContDom.append(mainItem1).append(mainItem2).append(mainItem3).append(mainItem4);mainCartItem.append(cartItemContDom);var mainItem5=$('<p class="cart_section_name"><a href="'+this.data.goodsList[index].DETAIL_LINK+'" target="_blank">'+this.data.goodsList[index].GOODS_TITLE+"</a></p>");mainCartItem.append(mainItem5);mainCartDom.append(mainCartItem).show();$(".shopping_reload").hide()}};this.afterAddGoods=function(){this.refurCartNumByCookie()};this.checkoutChange=function(){var cartObj=this;$("#cart_goods_list").delegate("a","click",function(){if($(this).attr("at")){var at=$(this).attr("at");eval(at+"(this);")}});$("#cart_goods_list").delegate(".cart_section_purchases","mouseleave",function(){var obj=$(this).find("input");var skuId=$(obj).attr("skuId");var promoteType=$(obj).attr("promoteType");var lastAmount=Number($(obj).attr("lastAmount"));var minBuyNum=Number($(obj).attr("minBuyNum"));var maxBuyNum=Number($(obj).attr("maxBuyNum"));var currAmount=Number($(obj).val());if(currAmount!=lastAmount){if(cartObj.modifyGoods(skuId,currAmount,promoteType,minBuyNum,maxBuyNum)===false){$(obj).val(lastAmount)}}})};this.addOne=function(obj){var inputDom=$(obj).closest(".cart_section_purchases").find("input");var maxBuyNum=isNaN(Number($(obj).attr("maxBuyNum")))?999:Number($(obj).attr("maxBuyNum"));if(Number($(inputDom).val())+1>maxBuyNum){return false}$(inputDom).val(Number($(inputDom).val())+1);return true};this.subOne=function(obj){var inputDom=$(obj).closest(".cart_section_purchases").find("input");var minBuyNum=isNaN(Number($(obj).attr("minBuyNum")))?1:Number($(obj).attr("minBuyNum"));if(Number($(inputDom).val())-1<minBuyNum){return false}$(inputDom).val(Number($(inputDom).val())-1);return true};this.getIsMainCartOpen=function(){return $("#cart_login").is(":visible")};this.beforeAddGoods=function(){if(buyerInfo.getIsGuest(true)){header("/login.html?tourl="+encodeURIComponent(window.location.href));return false}else{return true}};this.cleanMainCartPanel=function(){this.refurCartNum(0);$("#cart_login").hide();$("#cart_login_micro").show()};this.showLoading=function(){$(".shopping_reload").html('<img src="'+web_img_domain+'en/tt_loading.gif"/>').show();$("#cart_goods_list").hide()};this.showBusy=function(){$(".shopping_reload").html('The network is busy,<a href="javascript:void(0);" onclick="'+this.instanceName+'.getCartDetail();">click here</a>to reload!').show()};this.showEmpty=function(){$("#sum_amount_open").html(0);this.refurCartNum(0);$("#sum_allprice").html(0);$(".shopping_reload").html("Your shopping cart is empty!").show()}};TTCart_En.prototype=new TTCart();var cookieConfig=function(b,c,a){if(b!=""){$.cookies.set(b,c,{path:"/",hoursToLive:a,domain:".tootoo.cn"})}};function header(a){window.location.href=a;window.event.returnValue=false;return false}function $_GET(d){var b=document.location.search.toString();var f="";if(b.substr(0,1)=="?"&&b.length>1){var h=b.substring(1,b.length);var a=h.split("&");for(var c=0;c<a.length;c++){var g=a[c].split("=");if(g[0]==d&&g.length==2){f=g[1]}}}return f}function vcode(c,b,a,d){target=$(c);if(target&&b){imgPath="/vcode.php?w="+a+"&h="+d+"&v="+b+"&x="+Math.round(Math.random()*100000);target[0].src=imgPath;target.css("cursor","pointer");target.click(function(){this.src=imgPath+"&y="+Math.round(Math.random()*100000)})}var f=function(g){return getJson("/vcode.php","c="+g+"&v="+b+"&x="+Math.round(Math.random()*100000))};return f}function checkVcode(c,b,a){var d=$(b);var f;d.blur(function(){if(c(d[0].value)){f=""}else{f=""}$(a).html(f)})}function lengthmix(g){var f=/^[\u4e00-\u9fa5]{1}$/;var a=g.length;var b=g.length;for(var c=0;c<b;c++){var d=new RegExp(f);if(d.test(g.charAt(c))){a++}}return a}String.prototype.check=function(c){if(typeof(c)!="string"){return false}if(c=="nickname"){var a=/^([a-zA-Z0-9\-_\u4e00-\u9fa5]+)$/;var b=new RegExp(a);if(lengthmix(this)>15||lengthmix(this)<4){return false}else{if(!b.test(this)){return false}else{return true}}}else{switch(c){case"email":reg=/^([a-z0-9+_]|\-|\.)+@(([a-z0-9_]|\-)+\.)+[a-z]{2,6}$/i;break;case"pass":reg=/^[a-zA-Z0-9~!@#$%^&\*()_\+|<>?:"';,\./`\[\]\\\={}]{6,20}$/;break;case"answer":reg=/^[a-zA-Z0-9\u4e00-\u9fa5\.\-_]{2,50}$/;break;default:reg=c;break}var b=new RegExp(reg);if(b.test(this)){return true}else{return false}}var b=new RegExp(reg);if(b.test(this)){return true}else{return false}};function getJson(a,c){var b=new Object;$.ajax({url:a,data:c,dataType:"json",cache:false,async:false,success:function(d){b=d}});return b}var O2String=function(d){var c=[];var a="";if(Object.prototype.toString.apply(d)==="[object Array]"){for(var b=0;b<d.length;b++){c.push(O2String(d[b]))}a="["+c.join(",")+"]"}else{if(Object.prototype.toString.apply(d)==="[object Date]"){a="new Date("+d.getTime()+")"}else{if(Object.prototype.toString.apply(d)==="[object RegExp]"||Object.prototype.toString.apply(d)==="[object Function]"){a=d.toString()}else{if(Object.prototype.toString.apply(d)==="[object Object]"){for(var b in d){d[b]=typeof(d[b])=="string"?'"'+d[b]+'"':(typeof(d[b])==="object"?O2String(d[b]):d[b]);fi=typeof b=="string"?'"'+b+'"':b;c.push(fi+":"+d[b])}a="{"+c.join(",")+"}"}}}}return a};overlay=function(){var a=null;if(typeof document.body.style.maxHeight==="undefined"){$("html").css({height:"100%",width:"100%"});$("html").css("overflow","hidden");if(document.getElementById("TB_HideSelect")===null){a=$("<iframe id='TB_HideSelect'></iframe><div id='TB_overlay'></div><div id='TB_window'></div>");$("body").append(a)}}else{if(document.getElementById("TB_overlay")===null){a=$("<div id='TB_overlay'></div><div id='TB_window'></div>");$("body").append(a)}}var b=navigator.userAgent.toLowerCase();if(b.indexOf("mac")!=-1&&b.indexOf("firefox")!=-1){$("#TB_overlay").addClass("TB_overlayMacFFBGHack")}else{$("#TB_overlay").addClass("TB_overlayBG")}return function(){a.remove()}};setAddress=function(d){var b=overlay();var c=$('<div id="set-address"><a href="javascript:closeAddress();" >'+tx[36]+"</a></div>");window.closeAddress=function(){c.remove();b()};window.AddressCallBack=d;var a=new Date();url="/address.php?act=set&callback=AddressCallBack&sid="+a.getTime();c.load(url);$("body").append(c)};function getGiftDiv(b,a){window.setGift(b,a)}setGift=function(f,d){var b=overlay();var c=$('<div id="set-address"></div>');window.closeGift=function(){var j=$("#allSkuid").val();var g=j.split(",");for(index in g){var i=g[index];$gift.getGift();if(i!=""&&($gift.data[i]==undefined||$gift.data[i]=="")){var h=$("#gift"+i+"_1").val();$gift.setData(i,h)}}c.remove();b()};window.CallBackGift=f;var a=new Date();url="/promote_gift.php?"+d;url=url.replace(/[ ]/g,"");c.load(url);$("body").append(c)};setAddresssdc=function(d){var b=overlay();var c=$('<div id="set-address"></div>');window.closeAddress=function(){c.remove();b()};window.AddressCallBack=d;var a=new Date();url="/address.php?sdc=1&act=set&callback=AddressCallBack&sid="+a.getTime();c.load(url);$("body").append(c)};myAlert=function(h){var j=true;var d="";var c=[{text:tx[35],fn:function(){return true}}];var a=overlay();if(typeof(h)=="object"){if(typeof(h.cls)=="boolean"){j=h.cls}if(typeof(h.btn)=="object"){c=h.btn}d=h.msg.toString()}else{d=h.toString()}var f=$('<div class="alarm_box"></div>');var b=$('<div class="f_le alarm_le"></div>');if(lang=="en"){b.append('<p class="tip_box_lefttext">'+d+"</p>")}else{b.append("<p>"+d+"</p>")}var i=$('<div class="tspace-xl alarm_btn"></div>');var g=new Array();for(index in c){g[index]=$('<a href="#1">'+c[index].text+"</a>");g[index].bind("click",function(){f.remove()});g[index].bind("click",function(){a()});g[index].bind("click",c[index].fn);i.append(g[index])}b.append(i);f.append(b);if(j){var k=$('<div class="f_ri alarm_ri black_l"><a href="#">'+tx[36]+"</a></div>");k.click(function(){f.remove();a();return true});f.append(k)}f=$('<div id="my-alert" class="com_alarm"></div>').append(f);$("body").append(f);scroll(0,0)};$.fn.extend({pwdStrongCheck:function(){checkpassword=function(d){var f=$(d).val();var b=0;var j="",g=false,k=false,i=false,c=false;var h=/[A-Z]/;var a=/[a-z]/;var m=/[0-9]/;var l=/[~!@#$%^&\*()_\+|<>?:"';,\./`\[\]\\]/;g=h.test(f);k=a.test(f);c=m.test(f);i=l.test(f);b=0+(c?1:0)+(g?1:0)+(k?1:0)+(i?1:0);switch(b){case 1:$("#pwdstrongimg").attr("src",web_img_path+"btn/mess-1.gif");$("#pwdstrongimg").show();break;case 2:$("#pwdstrongimg").attr("src",web_img_path+"btn/mess-2.gif");$("#pwdstrongimg").show();break;case 3:case 4:$("#pwdstrongimg").attr("src",web_img_path+"btn/mess-3.gif");$("#pwdstrongimg").show();break;default:$("#pwdstrongimg").hide();break}};$(this).keyup(function(){checkpassword(this)});$(this).blur(function(){checkpassword(this)})}});function myfavorite(gid){$.get("/index.php?r=tFavorite/new",{goods_id:gid},function(ret){if(ret==1){myAlert(tx[37])}else{if(ret==2){myAlert(tx[38])}else{if(ret==3){myAlert(tx[39])}else{if(ret==4){myAlert(tx[40])}else{if(ret==5){myAlert(tx[41])}else{if(typeof(eval("("+ret+")"))=="object"){var arr=eval("("+ret+")");myAlert(arr.err_msg)}else{myAlert(tx[42])}}}}}}})}function format_weight(a){value=Math.round((a/500),2);if(value==1){value=""}return value+tx[43]}function format_price(g){var f=2;var a="";isNaN(parseFloat(g))?g=0:g=parseFloat(g);v=g.toFixed(f).toString();var h=v.split(".");var d=h[0];var b=h[1]?"."+h[1]:"";var c=/(\d+)(\d{3})/;while(c.test(d)){d=d.replace(c,"$1,$2")}v=d+b;if(v.charAt(0)=="-"){return a+"-&yen;&nbsp;"+v.substr(1)}return a+"&yen;&nbsp;"+v}function $_Get(a){var c=window.location.search;var b=new RegExp(""+a+"=([^&?]*)","ig");return((c.match(b))?(c.match(b)[0].substr(a.length+1)):"")}function search(b){var a=document.getElementById(b);if(a.value!=""){location.href="category-"+a.value+".html"}else{myAlert(tx[52])}}previewWin=function(a){var d=overlay();window.closePreWin=function(){d();$("#my-alert").remove()};alertDom=$('<div id="my-alert" style="width:710px;height:560px;margin-left:-360px; top:20px; margin-top:20px;"></div>');var b=$('<div class="my-alert-close">'+tx[36]+"</div>");b.click(function(){d();return true});alertDom.append(b);var c=new Date();alertDom.load("/preview.php?gid="+a+"&sid="+c.getTime());$("body").append(alertDom)};preloadImages=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];$(document).ready(function(){$("<img>").attr("src",b)})}};var hasinput=false;feedBackWin=function(){if(hasinput==true){return false}hasinput=true;var c=overlay();window.closePreWin=function(){c();$("#my-alert").remove();hasinput=false};alertDom=$('<div id="my-alert" style="background:#fff;width:560px;margin-left:-280px; top:40px; margin-top:20px;border:4px solid #333"></div>');var a=$('<div class="my-alert-close">'+tx[36]+"</div>");a.click(function(){c();return true});alertDom.append(a);var b=new Date();alertDom.load("/feedback.php");$("body").append(alertDom)};goodsNoticeWin=function(a){if(hasinput2==true){return false}hasinput2=true;var c=overlay();window.closePreWin=function(){c();$("#my-alert").remove();hasinput2=false};alertDom=$('<div id="my-alert" class="qun_boxborder" style="width:570px;height:328px;margin-left:-280px; top:40px; margin-top:0px;border:4px solid #fff;padding-top:0px;background-color:#fff"></div>');var b=new Date();alertDom.load("/goodsnotice.php?goodsid="+a+"&sid="+b.getTime());$("body").append(alertDom)};function JT_init(){$("a.jTip").hover(function(){JT_show(this.href,this.id,this.name)},function(){$("#JT").remove()}).click(function(){return false})}function JT_show(b,j,h){if(h==false){h="&nbsp;"}var i=document.documentElement;var k=self.innerWidth||(i&&i.clientWidth)||document.body.clientWidth;var f=k-getAbsoluteLeft(j);var d=getAbsoluteTop(j)-3;var a=b.replace(/^[^\?]+\??/,"");var c=parseQuery(a);if(c.width===undefined){c.width=250}if(c.bgcolor===undefined){c.bgcolor="#FFF"}if(c.tbgcolor===undefined){c.bgcolor="#DDD"}if(c.link!==undefined){$("#"+j).bind("click",function(){window.location=c.link});$("#"+j).css("cursor","pointer")}if(f>((c.width*1)+75)){$("body").append("<div id='JT' style='width:"+c.width*1+"px;border-color:"+c.tbgcolor+";background-color:"+c.bgcolor+";'><div id='JT_arrow_left' style='background-color:"+c.tbgcolor+";'></div><div id='JT_close_left' style='background-color:"+c.tbgcolor+";'>"+h+"</div><div id='JT_copy'><div class='JT_loader'><div></div></div>");var l=getElementWidth(j)+11;var g=getAbsoluteLeft(j)+l}else{$("body").append("<div id='JT' style='width:"+c.width*1+"px;border-color:"+c.tbgcolor+";background-color:"+c.bgcolor+";'><div id='JT_arrow_right' style='background-color:"+c.tbgcolor+";left:"+((c.width*1)+1)+"px'></div><div id='JT_close_right' style='background-color:"+c.tbgcolor+";'>"+h+"</div><div id='JT_copy'><div class='JT_loader'><div></div></div>");var g=getAbsoluteLeft(j)-((c.width*1)+15)}$("#JT").css({left:g+"px",top:d+"px"});$("#JT").show();$("#JT_copy").load(b)}function getElementWidth(a){x=document.getElementById(a);return x.offsetWidth}function getAbsoluteLeft(a){o=document.getElementById(a);oLeft=o.offsetLeft;while(o.offsetParent!=null){oParent=o.offsetParent;oLeft+=oParent.offsetLeft;o=oParent}return oLeft}function getAbsoluteTop(a){o=document.getElementById(a);oTop=o.offsetTop;while(o.offsetParent!=null){oParent=o.offsetParent;oTop+=oParent.offsetTop;o=oParent}return oTop}function parseQuery(d){var f=new Object();if(!d){return f}var a=d.split(/[;&]/);for(var c=0;c<a.length;c++){var h=a[c].split("=");if(!h||h.length!=2){continue}var b=unescape(h[0]);var g=unescape(h[1]);g=g.replace(/\+/g," ");f[b]=g}return f}function blockEvents(a){if(a.target){a.preventDefault()}else{a.returnValue=false}}(function(a){a.fn.extend({slidebox:function(c){var b={interval:3000,fadeInTime:300,fadeOutTime:200};c=a.extend({},b,c);var d=c.interval;var g=c.fadeInTime;var f=c.fadeOutTime;return this.each(function(k){var w=a("ul.slide-txt li",this);var r=a("ul.op li",this);var m=a("ul.slide-pic li",this);var q=w.length;var n=0;var h=null;var p=function(){window.clearInterval(h)};var l=function(i){if(i){n=i.current||0}else{n=(n>=(q-1))?0:(++n)}m.filter(":visible").fadeOut(f,function(){m.eq(n).fadeIn(g);m.removeClass("cur").eq(n).addClass("cur")});w.removeClass("cur").eq(n).addClass("cur");r.removeClass("cur").eq(n).addClass("cur")};var j=function(){h=window.setInterval(function(){l()},d)};var u=function(B,z){p();var A=a.inArray(B,z);l({current:A})};w.hover(function(){if(a(this).attr("class")!="cur"){u(this,w)}else{p()}},j);m.hover(p,j);j()})}})})(jQuery);function goodsVisitJs(g,a,f){var c="";if(g==1||g==3||g==5||g==7||g==6){c+=c?"&counter=true":"counter=true";var b=1}if(g==2||g==3||g==6||g==7){c+=c?"&history=true":"history=true";var b=1}if(g==4||g==5||g==6||g==7||g==8){c+=c?"&act=gethistorylist":"act=gethistorylist"}if(g==7||g==8){c+=c?"&tpl_type=html_v3":"tpl_type=html_v3"}if(g==6){c+=c?"&tpl_type=html_v4":"tpl_type=html_v4"}if(c!=""){var d=c+(b==1?"&gid="+a:"")+"&isajax=1";$.ajax({url:"/index.php?r=tGcounter/index",type:"GET",cache:false,async:false,data:d,dataType:"json",timeout:1000,error:function(){},success:function(h){if(h.errno==0){if(g==4||g==5||g==6||g==7||g==8){$("#"+f).html(h.content)}}}})}}var ShowAds=function(a,b){return;b=(b==undefined)?0:b;if(b!=0){$.get("/show_ads.php",{pos:b},function(c){$("#"+a).html(c);if(c==""){$("#"+a).hide()}})}};var ShowSalePageAds=function(dom_id,num,p_num,callback){num=(num==undefined)?0:num;if(num!=0){$.ajax({type:"GET",url:web_domain+"show_sale_page_ads.php?num="+num+"&p_num="+p_num,dataType:"jsonp",jsonp:"callback",success:function(data){$("#"+dom_id).html(data);if(data==""){$("#"+dom_id).hide()}if(callback!==undefined){eval(callback+"();")}}})}};var InitFourPicDl=function(b,a){var d=0;var c;$("#"+b).find("dl").each(function(){$(this).mouseover(function(){var f=$("#"+b).find("dl")[0];if(this!=$("#"+b).find("dl")[0]){$(f).removeClass("show0")}$(this).addClass("show0")});$(this).mouseout(function(){var f=$("#"+b).find("dl")[0];$(this).removeClass("show0");$(f).addClass("show0")});++d})};var AdsHorizSlide=function(a){this.ads_goods_obj_ls=new Array();this.index=0;this.tmpClickLeftStr="";this.tmpClickRightStr="";this.clickLeftStr=a+".clickLeft();";this.clickRightStr=a+".clickRight();";this.pos_max_no=4;this.initGoodsList=function(f,b,h,d){this.ads_goods_obj_ls=new Array();var c=0;var g=this;this.step=1;this.ads_pos_max=f;this.left_button_id=h;this.right_button_id=d;$("#"+b+" li").each(function(){g.ads_goods_obj_ls[c++]=this;if($(this).html()==""){g.step=2}else{}});if(this.ads_goods_obj_ls.length*this.step<=f){$("#"+this.left_button_id+" a").attr("href","javascript:;;");$("#"+this.right_button_id+" a").attr("href","javascript:;;");return}for(var c=0;c<this.ads_goods_obj_ls.length;c+=1){if(c>=this.ads_pos_max*this.step){$(this.ads_goods_obj_ls[c]).hide()}}if(this.ads_goods_obj_ls.length<this.ads_pos_max*this.step){$(this.ads_goods_obj_ls[this.ads_goods_obj_ls.length-1]).hide()}this.tmpClickRightStr="";for(var c=0;c<f;c++){this.tmpClickRightStr+=this.clickRightStr}this.tmpClickLeftStr="";for(var c=0;c<f;c++){this.tmpClickLeftStr+=this.clickLeftStr}$("#"+this.left_button_id+" a").attr("href","javascript:"+this.tmpClickLeftStr);$("#"+this.right_button_id+" a").attr("href","javascript:"+this.tmpClickRightStr)};this.clickLeft=function(){if(this.index<=0){return}this.index-=this.step;$(this.ads_goods_obj_ls[this.index]).show();if(this.step>1){$(this.ads_goods_obj_ls[this.index+1]).show()}$(this.ads_goods_obj_ls[this.index+this.ads_pos_max*this.step]).hide();if(this.step>1){$(this.ads_goods_obj_ls[this.index+this.ads_pos_max*this.step+1]).hide()}if(Math.floor((this.ads_goods_obj_ls.length-this.step)/(this.ads_pos_max*this.step))>=Math.floor((this.index)/(this.ads_pos_max*this.step))){$("#"+this.right_button_id+" a").attr("href","javascript:"+this.tmpClickRightStr);if(typeof(rightBtnImgEn)!="undefined"){$("#"+this.right_button_id+" a img").attr("src",rightBtnImgEn)}}if(0>=this.index){$("#"+this.left_button_id+" a").attr("href","javascript: ;");if(typeof(leftBtnImgUn)!="undefined"){$("#"+this.left_button_id+" a img").attr("src",leftBtnImgUn)}return}};this.clickRight=function(){if(Math.floor((this.ads_goods_obj_ls.length-this.step)/(this.ads_pos_max*this.step))<=Math.floor((this.index)/(this.ads_pos_max*this.step))){return}$(this.ads_goods_obj_ls[this.index]).hide();if(this.step>1){$(this.ads_goods_obj_ls[this.index+1]).hide()}$(this.ads_goods_obj_ls[this.index+this.ads_pos_max*this.step]).show();if(this.step>1){if(this.ads_goods_obj_ls.length-this.index-this.step>this.ads_pos_max*this.step){$(this.ads_goods_obj_ls[this.index+this.ads_pos_max*this.step+1]).show()}}this.index+=this.step;if(this.index>0){$("#"+this.left_button_id+" a").attr("href","javascript:"+this.tmpClickLeftStr);if(typeof(leftBtnImgEn)!="undefined"){$("#"+this.left_button_id+" a img").attr("src",leftBtnImgEn)}}if(Math.floor((this.ads_goods_obj_ls.length-this.step)/(this.ads_pos_max*this.step))<=Math.floor((this.index)/(this.ads_pos_max*this.step))){$("#"+this.right_button_id+" a").attr("href","javascript: ;");if(typeof(rightBtnImgUn)!="undefined"){$("#"+this.right_button_id+" a img").attr("src",rightBtnImgUn)}return}}};function addCart(h,d,g,a,f,c){nowSkuId=d+"Result";sku=d;var b=$("#"+d)[0].value;f=parseInt(f,10);b=parseInt(b,10);if(f!=0&&b>f){myAlert(tx[61]+"[ "+a+"-"+f+" ]"+tx[62]);return false}id=h;notice_sku_id=h;$car.addGoods(h,$("#"+d)[0].value,g,a,f,c)}function cart_callback(){$("#goods_notice_"+notice_sku_id).hide("fast");$("#goods_notice_"+notice_sku_id).show("slow")}function hotsale_cart_callback(){$("#hotsale_goods_notice_"+notice_sku_id).hide("fast");$("#hotsale_goods_notice_"+notice_sku_id).show("slow")}function catpanelSH(a,b){$("#cat_panel"+b+" >li.show").removeClass();$(a).addClass("show")}function ajaxPage(d,c,b,h,i,g){var f=$(h).html();$(h).html("");var a=d+(d.replace("?","")==d?"?":"&")+c+"="+i;$.ajax({url:a,type:"GET",cache:false,async:false,dataType:"json",timeout:1000,error:function(){$(h).html(f)},success:function(k){if(k.errno==0){$(h).html(k.content);var j=k.pagecount;writePageDiv(d,c,b,h,i,j,g)}else{$(h).html(f)}}});f=""}function sch(b){var a=(lang=="en")?web_en_domain:web_domain;a=a+"index.php?r=tGoods/search&input="+encodeURIComponent(b);document.location.href=a}function writePageDiv(j,l,f,c,i,d,a){var b=j+(j.replace("?","")==j?"?":"&")+l+"="+i;var m=(i-1)<1?1:(i-1);var k=(i+1)>d?d:(i+1);var n="";var h=m==i?"void(0);":("ajaxPage('"+j+"','"+l+"','"+f+"','"+c+"',"+m+",'"+a+"')");var g=k<=i?"void(0);":("ajaxPage('"+j+"','"+l+"','"+f+"','"+c+"',"+k+",'"+a+"')");if(a=="1"){n='<A href="#3" onclick="'+h+'"><IMG src="'+web_img_path+'ico/list_jt1.gif" ></A>';n+=i+"/"+d;n+='<A href="#3" onclick="'+g+'"><IMG src="'+web_img_path+'ico/list_jt2.gif" ></A>'}$(f).html(n)}function getShowPrice(p,c,d,a,m,f){var h;var k=tx[54];var l=c;var b;var j;var n=1;var i=$.cookies.get("bd");var g=$.cookies.get("bs");if(a==2){n=g}else{if(a==0){n=i}}if(n==null){n=1}if(p==1){b=tx[55];j=d;h=1}else{if(a==0&&n!=0&&n!=1){b=tx[56];j=c*n;h=1}else{if(a==2&&n!=0&&n!=1){b=tx[56];j=c*n;h=1}else{b=tx[57];j=d;h=0}}}$(".C_"+m).html(b+":"+tx[58]+"&nbsp;"+j.toFixed(2)+f)}$ttGift=function(){this.data=new Array();this.saveGift=function(){var strGifts="[";for(index in this.data){var strGift="{";if(index&&this.data[index]){strGift+="s:"+index;strGift+=",g:"+this.data[index];strGift+="},";strGifts+=strGift}}if(strGifts.charAt(strGifts.length-1)==","){strGifts=strGifts.substr(0,strGifts.length-1)}strGifts+="]";cookieConfig("gift_"+buyerInfo.BUYER_ID,strGifts,720)};this.getGift=function(){var strCookie=$.cookies.get("gift_"+buyerInfo.BUYER_ID);if(strCookie){var arrCookie=eval(strCookie);var getArr=new Array();for(index in arrCookie){if(arrCookie[index]!=""){getArr[arrCookie[index].s]=arrCookie[index].g}}this.data=getArr}};this.setData=function(skuId,giftSkuid){this.data[skuId]=giftSkuid;this.saveGift()};this.changeAmount=function(skuId,goodsNumLimit,amount){if(amount<goodsNumLimit){this.setData(skuId,"");this.saveGift()}}};var PreviewDetailTags=function(){this.friends=new Array();this.addFriends=function(c,b){var a=new Object();a.a_id=b;a.float_id=c;this.friends.push(a)};this.init=function(){for(var a=0;a<this.friends.length;a+=1){this.bindShow(this.friends[a].a_id,this.friends[a].float_id);var b=this;$("#"+this.friends[a].float_id+" .safety_certification_tit span a").attr("href","javascript:void(0);");$("#"+this.friends[a].float_id+" .safety_certification_tit span a").click(function(){b.closeAll()})}};this.closeAll=function(b){for(var a=0;a<this.friends.length;a+=1){if(this.friends[a].a_id!=b){$("#"+this.friends[a].float_id).hide()}}};this.bindShow=function(c,b){var a=this;$("#"+c).mouseover(function(d){a.closeAll(c);$("#"+b).fadeIn().show();$("#"+b).css("top",parseInt(d.pageY/80)*80+45);$("#"+b).css("left",d.pageX-500)})};this.getByAid=function(b){for(var a=0;a<this.friends.length;a+=1){if(this.friends[a].a_id==b){return b}}return false};this.getByFid=function(b){for(var a=0;a<this.friends.length;a+=1){if(this.friends[a].float_id==b){return b}}return false};this.bindClose=function(a){}};var headad=function(){this.from_array=new Array();this.from_array.bdcard='<div class="title_banner"><a href="/help/payment.html#hdfk"><img src="'+web_img_path+'banner_ka2.jpg" /></a></div>';this.from_array.tgad='<div class="tit_banner"><img src="http://img01.ttmimg.com/C8/03/1334111048520.jpg" width="996" height="90" border="0" usemap="#Map"><map name="Map" id="Map"><area shape="poly" coords="1,-1,299,1,299,88,3,87" href="'+web_domain+'product-1014222.html?ttad_source=ttad&ttad_pos=adtop_01" target="_blank"/><area shape="rect" coords="302,1,589,89" href="'+web_domain+'product-1021035.html?ttad_source=ttad&ttad_pos=adtop_02" target="_blank"/><area shape="rect" coords="592,0,995,89" href="'+web_domain+'product-1004198.html?ttad_source=ttad&ttad_pos=adtop_03" target="_blank"/></map></div>';this.from_array.bdtg="";this.from_str=",bdcard,tgad,bdtg,";this.strurl=document.location.toString();this.ttIncStr=".tootoo.cn";this.setcookie=function(){var c=this.strurl.indexOf(this.ttIncStr);var f=this.strurl.indexOf("tt=");if(c!=-1&&f!=-1){var b=this.strurl.substr(f+3);var a=b.split("&");var d=a[0];if(d!=""&&this.from_str.indexOf(","+d+",")!=-1){cookieConfig("tt",d,72)}}};this.init=function(){var f=new Array(/^category-(.*)\.html/,/^browernode.php/,/^product-(\d+)\.html/,/^actlist-goods.html/,/^rank.html/,/^actlist.html/,/^index-ads.html/,/^fruits-vegetables.html/,/^poultry-custard.html/,/^delicacies.html/,/^oil-foods.html/,/^specialty.html/,/^imported.html/,/^health-care.html/,/^tea-water-wine.html/);var a=this.strurl.indexOf(".tootoo.cn");var b=(a)?this.strurl.substr(a+11):"";var g=false;var h=false;for(var d=0;d<f.length;d++){var c=b.match(f[d]);if(c){g=true;h=(f[d]=="/^index-ads.html/")?true:h;break}}h=true;g=false;if(g){this.setcookie()}var j=$.cookies.get("tt");if(j!=""&&j!=null){if(typeof(this.from_array[j])!="undefined"){if(g){if(j=="bdcard"){$("body").prepend(this.from_array[j])}else{if(j=="tgad"){if(h){$("div.too_search").before(this.from_array[j])}else{$("div.too_search").after(this.from_array[j])}}else{if(j=="bdtg"){$("body").prepend(this.from_array.bdcard);if(h){$("div.too_search").before(this.from_array.tgad)}else{$("div.too_search").after(this.from_array.tgad)}}}}}$("ul.too_nav_c a:contains("+tx[67]+")").attr("href","/index-ads.html")}}}};var needLoadImg=function(a,d){var b=function(f){if(typeof(f.style)!="undefined"&&((typeof(f.style.display)!="undefined"&&f.style.display=="none")||(typeof(f.style.visibility)!="undefined"&&f.style.visibility=="hidden"))){return false}else{if(typeof(f.parentNode)!="undefined"&&f.parentNode!=null&&f.parentNode!=f){return b(f.parentNode)}}return true};var c=$("img[initSrc]").not(".zz").filter(function(f){return b(this)});this.checkImg=function(i){var h=$(window).height();var g=$(window).scrollTop();c.each(function(){var k=this;var m=k.height;var j=$(k).offset().top;if(m<=1){m=d;j=j-m}a=(a<=m)?m:a;var l=parseInt(m/10);if((((j+a)-i)>0&&(j-i)<h)||((j+m>=g)&&(g+h>=j+l))){if(k.getAttribute("initSrc")){k.src=k.getAttribute("initSrc");k.removeAttribute("initSrc")}}});var f=$("img[initSrc]");if(f.length==0){window.onresize=null;window.onscroll=null}};this.init=function(){this.checkImg(document.documentElement.scrollTop)};this.loadDefImg=function(f){for(var g=0;g<c.length;g++){var h=c[g];h.src=f}}};var laterScriptsRun=function(){var a="";$(".laterScripts").each(function(){a+=$(this).text()});var b=$("<script type='text/javascript'>"+a+"<\/script>");$("body").append(b)};var delegateFun=function(selector,childSelector,event,childSelectorAttr){$("#"+selector).delegate(childSelector,event,function(){if($(this).attr(childSelectorAttr)){var jsfun=$(this).attr(childSelectorAttr);eval(jsfun+"(this)")}})};var acAddCart=function(obj){addCart($(obj).attr("ac_sku_id"),$(obj).attr("ac_amountId"),$(obj).attr("ac_promotion_type"),$(obj).attr("ac_min_buy_num"),$(obj).attr("ac_max_buy_num"),eval($(obj).attr("ac_cart_callback")));if($(obj).attr("ac_gaq")!=""){_gaq.push(["_trackPageview",$(obj).attr("ac_gaq")])}};var atGoodsNoticeWin=function(a){goodsNoticeWin($(a).attr("at_goods_id"))};var timeRange=function(g,b){var d=Date.parse(g.replace(/-/g,"/"));var a=Date.parse(b.replace(/-/g,"/"));var c=new Date();var f=c.getTime();if(f>d&&f<a){return true}else{return false}};var numberRange=function(c,b,a){if(c<b||c>a){return false}return true};var parseIntArray=function(b){var a=[];if(b instanceof Array){for(valueIndex in b){a[valueIndex]=parseInt(b[valueIndex])}}return a};var psSaveToCookie=function(a,f,d,c){var b=a+"-"+f+"-"+d+"-"+c;cookieConfig("ps",b,24*30)};var detailPsCallback=function(a,d,c,b){this.psSaveToCookie(a,d,c,b);$("#noGwId").hide();$("#canGwId").show()};var buyerInfo=lang==="en"?new Buyer_En:new Buyer;buyerInfo.init();$().ready(initJs);var _bdhm_top=0;var _bdhmProtocol=(("https:"==document.location.protocol)?" https://":" http://");var _bdhm_tim=new Image(1,1);_bdhm_tim.id="bdhmPerimg";_bdhm_tim.src=_bdhmProtocol+"hm.baidu.com/_tt.gif?si=75ac2f3027882fb20cb9d19d76557025&rnd="+Math.round(Math.random()*2147483647);_bdhm_tim.onload=function(){_bdhm_top=1};